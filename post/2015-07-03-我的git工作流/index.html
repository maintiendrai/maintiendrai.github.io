<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>我的Git工作流  &middot; 黑暗民谣</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="description" content="" />

<meta name="keywords" content="GIT, ">


<meta property="og:title" content="我的Git工作流  &middot; 黑暗民谣 ">
<meta property="og:site_name" content="黑暗民谣"/>
<meta property="og:url" content="http://maintiendrai.github.io/post/2015-07-03-%E6%88%91%E7%9A%84git%E5%B7%A5%E4%BD%9C%E6%B5%81/" />
<meta property="og:locale" content="en-us">


<meta property="og:type" content="article" />
<meta property="og:description" content=""/>
<meta property="og:article:published_time" content="2015-07-03T12:09:09&#43;08:00" />
<meta property="og:article:modified_time" content="2015-07-03T12:09:09&#43;08:00" />

  
    
<meta property="og:article:tag" content="GIT">
    
  

  
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@" />
<meta name="twitter:creator" content="@" />
<meta name="twitter:title" content="我的Git工作流" />
<meta name="twitter:description" content="" />
<meta name="twitter:url" content="http://maintiendrai.github.io/post/2015-07-03-%E6%88%91%E7%9A%84git%E5%B7%A5%E4%BD%9C%E6%B5%81/" />
<meta name="twitter:domain" content="http://maintiendrai.github.io/">
  

<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "headline": "我的Git工作流",
    "author": {
      "@type": "Person",
      "name": "http://profiles.google.com/+?rel=author"
    },
    "datePublished": "2015-07-03",
    "description": "",
    "wordCount":  183 
  }
</script>



<link rel="canonical" href="http://maintiendrai.github.io/post/2015-07-03-%E6%88%91%E7%9A%84git%E5%B7%A5%E4%BD%9C%E6%B5%81/" />
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/touch-icon-144-precomposed.png">
<link rel="icon" href="/favicon.png">
<meta name="generator" content="Hugo 0.16" />

  <!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.2/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->



    <link rel="stylesheet" href="http://maintiendrai.github.io/css/bootswatch/default/bootstrap.min.css">


<link rel="stylesheet" href="http://maintiendrai.github.io/css/font-awesome.min.css">
<link rel="stylesheet" href="http://maintiendrai.github.io/css/style.css">


  <link rel="stylesheet" href="http://maintiendrai.github.io/css/highlight/default.css">


</head>
<body data-ng-app="myapp" data-ng-controller="MyController" data-ng-mouseleave="MouseLeave($event)">
    <header id="main-header">
  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>

          
          
            <a class="navbar-brand-img" href="http://maintiendrai.github.io/">
          <img alt="" src="">
            
        </a>

      </div>
      <div id="navbar" class="collapse navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          
          <li>

            <a href="https://appernetic.io/app/#/about"
            >

            

            About
            </a>
          </li>
          
          <li>

            <a href="https://blog.appernetic.io/"
            >

            

            Blog
            </a>
          </li>
          
          <li>

            <a href="https://appernetic.io/app/#/dashboard/list/create"
            >

            

            Dashboard
            </a>
          </li>
          
          <li>

            <a href="http://maintiendrai.github.io/post"
            >

            

            Posts
            </a>
          </li>
          
          <li>

            <a href="http://maintiendrai.github.io/tags"
            >

            

            Tags
            </a>
          </li>
          
        </ul>
      </div>
      
    </div>
  </nav>

</header>


<div class="container">
  <div class="row">
    <div class="col-sm-12">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
  <div class="text-center">

    <h1>我的Git工作流
</h1>

    <div class="metas">
<small>
  <i class="fa fa-calendar"></i>
  <time datetime="2015-07-03">3 Jul, 2015</time>
</small>


  <small>
  &middot; Read in about 1 min
  &middot; (183 Words)
</small>


<div class="margin-10">
  <i class="fa fa-tags"></i>
  
  <a href="http://maintiendrai.github.io/tags/git" class="label label-primary">GIT</a>
  


</div>
<br>
</div>

  </div>
</div>

      <div class="content">
  

<h1 id="git-data-stores">Git data stores</h1>

<p><img src="http://ww2.sinaimg.cn/large/637573b1gw1etsbgs5we2j20dd0cnmyl.jpg" alt="" /></p>

<p>•   workspace - 对应本地目录，当有文件修改，则最新体现在workspace变化</p>

<p>•   index - 是索引文件，指定commit要提交的内容</p>

<p>•   commit - 提交到本地仓库</p>

<p>•   HEAD - 表示本地最新的一次commit</p>

<p>•   git diff - 比较workspace与index</p>

<p>•   git diff -cached - 比较index与commit</p>

<p>•   git diff HEAD - 比较workspace与commit</p>

<p><img src="http://ww2.sinaimg.cn/large/637573b1gw1etsbhk7uycj20e50huwgq.jpg" alt="" /></p>

<h1 id="git-工作流">Git 工作流</h1>

<p>master 用于发布<br />
develop 用户主要开发点<br />
新功能hotfix，开个功能名的分支，这个分支不 push，写好后:</p>

<p><code>(hotfix) $ git add .</code></p>

<p><code>(hotfix) $ git commit -m &quot;...&quot;</code></p>

<p><code>(hotfix) $ git checkout develop</code></p>

<p><code>(develop) $ git pull origin develop</code></p>

<p><code>(develop) $ git merge hotfix </code></p>

<p><code>(develop) $ git push origin develop</code></p>

<p>自己合并到 develop 分支，合并只是简单的 merge 就好了</p>

<h1 id="git-rebase">git rebase</h1>

<p>两个人工作在一个特性分支上，push 的时候出现冲突，那么要用
git pull
还是
git pull &ndash;rebase
呢？</p>

<p>以前我是用第一种方式，但是后来偏好
 pull &ndash;rebase，
因为这样可以得到一个线性的特性分支，虽然丢失了并行开发的信息，而且 commit 较多的话解决冲突会变麻烦（解决方案是频繁 rebase &amp;&amp; push）。
保持线性的特性分支，查阅很多资料都只看见“管理者的喜好”这样的描述，而没有描述优缺点。
多人协作，所以需要经常push到代码库备份。而这两个人如果经常 pull 的话，就会出现很多
Merge branch &lsquo;aaa&rsquo; of git.xxx.xxx/xxx/xxx into aaa
这样的 merge commit，这时候就会发现这些merge动作其实没有必要，这些 commit 在审阅代码的时候很干扰。</p>

<p><img src="http://ihower.tw/blog/wp-content/uploads/2010/02/git-merge.jpg" alt="" /></p>

<p>总结了一下：
加上 rebase 的意思是，
1. 把本地 repo. 从上次 pull 之后的变更暂存起來
2. 回復到上次 pull 時的情況
3. 套用远端的变更
4. 最后再套用刚暂存下来的本地变更。
詳細說明可以參考 [](<a href="http://gitready.com/advanced/2009/02/11/pull-with-rebase.html">http://gitready.com/advanced/2009/02/11/pull-with-rebase.html</a> &ldquo;pull with rebase&rdquo;)。</p>

<p>用图说明下：</p>

<p>还没合并前：
<img src="http://gitbook.liuhui998.com/assets/images/figure/rebase1.png" alt="" />
用git merge合并：
<img src="http://gitbook.liuhui998.com/assets/images/figure/rebase2.png" alt="" />
用git rebase合并：
<img src="http://gitbook.liuhui998.com/assets/images/figure/rebase3.png" alt="" />
当&rsquo;mywork&rsquo;分支更新之后，它会指向这些新创建的提交(commit),而那些老的提交会被丢弃。 如果运行垃圾收集命令(pruning garbage collection), 这些被丢弃的提交就会删除.
<img src="http://gitbook.liuhui998.com/assets/images/figure/rebase4.png" alt="" />
最后是：
现在我们可以看一下用合并(merge)和用rebase所产生的历史的区别：
<img src="http://gitbook.liuhui998.com/assets/images/figure/rebase5.png" alt="" />
(rebase 时所谓的解决冲突，其实是直接修改你之前的变更內容，所以上图中变成 C5’ 跟 c6’ )</p>

<p>在rebase的过程中，也许会出现冲突(conflict). 在这种情况，Git会停止rebase并会让你去解决 冲突；在解决完冲突后，用&rdquo;git-add&rdquo;命令去更新这些内容的索引(index), 然后，你无需执行 git-commit,只要执行:</p>

<p><code>$ git rebase --continue</code></p>

<p>这样git会继续应用(apply)余下的补丁。
在任何时候，你可以用&ndash;abort参数来终止rebase的行动，并且&rdquo;mywork&rdquo; 分支会回到rebase开始前的状态。</p>

<p><code>$ git rebase --abort</code></p>

<p>参考资料:</p>

<ol>
<li><a href="http://blog.osteele.com/posts/2008/05/my-git-workflow/#fn:1">http://blog.osteele.com/posts/2008/05/my-git-workflow/#fn:1</a></li>
<li><a href="http://gitbook.liuhui998.com/4_2.html">http://gitbook.liuhui998.com/4_2.html</a></li>
<li><a href="https://ihower.tw/blog/archives/3843">https://ihower.tw/blog/archives/3843</a></li>
<li><a href="https://getpocket.com/a/read/961298276">https://getpocket.com/a/read/961298276</a></li>
<li><a href="http://www.oschina.net/question/54371_59134">http://www.oschina.net/question/54371_59134</a></li>
<li><a href="http://www.nvie.com/posts/a-successful-git-branching-model/">http://www.nvie.com/posts/a-successful-git-branching-model/</a></li>
</ol>

</div>


      <footer>
  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
      
  
    <nav><ul class="pager">
    
        <li class="previous">
          <a href="http://maintiendrai.github.io/post/2015-05-24-%E8%B7%AF%E7%94%B1%E5%99%A8%E6%8A%98%E8%85%BE/" title="折腾路由器的一天">
            <span aria-hidden="true">&larr;</span>Previous
          </a>
        </li>
    

    
      <li class="next">
        <a href="http://maintiendrai.github.io/post/2016-07-26-Objective-C%E8%BD%AC%E5%90%91Swift%E8%8B%A5%E5%B9%B2tips/" title="Objective-C转向Swift若干tips">
            Next <span aria-hidden="true">&rarr;</span>
        </a>
      </li>
    
    </ul> </nav>
  


</div>

  <div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">
  

</div>

</footer>

    </div>
    
  </div>
</div>
      
<footer class="footer hidden-print">
  <div class="container">
    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
           <div class="pull-left">
  <a class="toplink" href="#">back to top</a>
</div>
<div class="pull-right">
  
  <a href="http://maintiendrai.github.io/license" >license</a>
  
</div>

        </div>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 text-center">
              
    
<div class="container footline">
    <small>
</small>
</div>


    


        </div>
    </div>
  </div>
</footer>

    

<script src="http://maintiendrai.github.io/js/jquery.min.js"></script>
<script src="http://maintiendrai.github.io/js/bootstrap.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.9/angular.min.js"></script>
<script src="/js/popover/angular-storage.min.js"></script>



<script src="http://maintiendrai.github.io/js/highlight.pack.js"></script>
<script src="http://maintiendrai.github.io/js/site.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<script>
var ENABLE_POPOVER = ""; 
var EXPIRE_COOKIE = ""; 
var SHOW_MODAL_TIMEOUT = ""; 
var MOUSE_LEAVE = ""; 
var MODAL_SIZE = ""; 
var POST_URL = ""; 
var SIGNUP_HEADER = "";
var HEADER_IMAGE = "";
var IMG_DESCRIPTION = "";
var SIGNUP_TEXT = "";
var INPUT_PLACEHOLDER = "";
var SUBMIT_BUTTON = "";
var SUCCESS_MESSAGE = "";
var ERROR_MESSAGE = "";
var OPTIN = "";
var COOKIE_NAME = "";
</script>
<script src="/js/popover/angular-modal-service.min.js"></script>
<script src="/js/angular-ismobile.min.js"></script>
<script src="/js/popover/popover.min.js"></script>

  </body>
</html>

